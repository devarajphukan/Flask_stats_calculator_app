from flask import Flask
from flask import request
from flask import render_template

app = Flask(__name__)

@app.route('/')
def my_form():
    return render_template("1.html")

@app.route('/', methods=['POST'])

def cochransQ() :
    args = request.form['text']
    
    b = args.replace(' ','').split('],[')
    d = []
    for i in range(len(b)):
	c = b[i].replace('[','').replace(']','').split(',')
	c = [ float(x) for x in c ]
	d.append(c)
    args = d
    temp = []
    for x in args :
        if(sum(x)==len(x) or sum(x) == 0) :
            continue
        temp += [x]

    #print(temp)
    N = len(temp)
    Li = []
    Lisq = []

    for i in range(N) :
        sm = sum(temp[i])
        Li += [sm]
        Lisq += [sm*sm]

    #print(Li)
    Lisq_sum = sum(Lisq)
    Li_sum = sum(Li)
    #print(Li_sum , Lisq_sum)

    Gi = []
    Gisq = []
    for j in range(len(temp[i])) :
        sm = 0
        for i in range(N) :
            sm += temp[i][j]
        Gi += [sm]
        Gisq += [sm*sm]

    Gi_sum = sum(Gi)
    Gisq_sum = sum(Gisq)
    #print(Gi_sum , Gisq_sum)

    k = len(args[0])
    Q = (k-1)*(k*Gisq_sum - Gi_sum*Gi_sum)/(k*Gi_sum - Lisq_sum)
    Q = str(Q)
    return Q


if __name__ == '__main__':
    app.run()
